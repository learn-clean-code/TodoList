# TodoList 2주차 (완성)

## 이번에 내가 구현한 것.

- Framer Motion을 사용해 참고 사이트와 최대한 흡사하게 구현
- Compound Pattern을 이용해 Modal 재사용성 및 확장성을 고려함
- 접근성을 위해 Modal을 Portal로 구현.
- 접근성을 위해 useToggle Hook에서 ESC를 눌렀을 때 모달이 닫히도록 구현

이번 주차에서는 크게 뭘 할게없어서 참고 사이트와 최대한 흡사하게 만들어보자 라는 마인드로 작업했습니다.

### Portal

저는 Backdrop과 Modal 컨텐츠를 보여주는 상위 요소 2개를 만들었습니다. 따라서 재사용성을 높이기 위해 Portal 컴포넌트를 만들어 사용했습니다.

### Compound Pattern

제가 정말 많이 사용하는 패턴입니다. 합성 컴포넌트 패턴중 하나이고, 이 패턴을 사용한 이유는 UI의 자유도 상승과 Prop drilling도 없고, 컴포넌트에 props를 여러개 전달하지 않기 때문에 가독성을 높일 수 있습니다. Context의 특성상 리랜더링이 일어나는 부분도 있지만 애초에 모달만 관련되어있는 작은 컴포넌트이기 때문에 리랜더링 이슈문제는 정말 사소하다고 생각합니다.

### 모달을 어디서 렌더링을 해야할지 고민

Portal을 사용하기 때문에 TodoButton 컴포넌트에서 모달을 보여주도록 구현을 했는데, 구조적인 관점에서는 이상하다고 느끼지만 렌더링 측면에서는 이 방법말고는 다른 방법이 떠오르지 않았습니다. (버튼 컴포넌트에서 toggle 상태를 제어하기 때문에 버튼 컴포넌트에서 모달을 렌더링함.)

### Framer Motion

Framer Motion을 사용하다보면 애니메이션이 뒤죽박죽일 수 있고, 관리하는게 까다로울것 같아 animation 폴더를 만들어 관리하도록 했습니다. 수 많은 애니메이션 라이브러리 중에서 이것을 선택한 이유는 Framer Motion이 기능 제공해주는것도 많고, 관련된 자료도 많고 사용법도 어렵지 않기 때문입니다.

### 접근성을 위한 키보드 이벤트

모달을 닫으려고 input 요소에서 키보드 이벤트를 처리하는 경우가 있는데, input에 포커스가 없어도 닫힐 수 있도록 전역객체에 이벤트를 걸어 처리했습니다.

### 느낀 점

Portal을 사용하니 애니메이션이 많이 힘드네요. 여기에 몇시간 투자한건지 모르겠습니다. 지금도 삽질만 하고있어요. 참고 사이트처럼 버튼을 클릭하면 scale이 작아지도록 하고싶은데 이상하게 됩니다. 그래서 이 부분을 제외하고 나머지 애니메이션은 구현을 해놨습니다.

저번에 FDD 방식을 사용했다보니 폴더 구조와 관련해서 고민은 전혀 없었습니다. (이래서 설계가 중요한가 봐요) 하지만 "렌더링을 어디서 하는게 좋을까" 라는 생각은 많이 들었던 것 같네요.
